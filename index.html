<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>OVERALL COMPETENCY VIEW</title>
   <link rel="preconnect" href="https://fonts.googleapis.com">
   <link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
/>

   <!-- Font Awesome Free -->
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Inria+Serif:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Intel+One+Mono:ital,wght@0,300..700;1,300..700&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

<!-- Tailwind Font Config -->
<script>
  tailwind.config = {
    theme: {
      extend: {
        fontFamily: {
          serif: ['"Inria Serif"', 'serif'],
          mono: ['"Intel One Mono"', 'monospace'],
          montserrat: ['"Montserrat"', 'sans-serif']
        }
      }
    }
  }
  </script>
 <script src="https://cdn.tailwindcss.com"></script>
 <script src="https://unpkg.com/alpinejs" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>
<body class="bg-white  font-serif">
  <!-- Header -->
 <header class="bg-white shadow flex justify-between items-center px-6 py-4 fixed top-0 left-0 right-0 z-50">

    <div class="flex items-center space-x-4">
      <img src="logo.png" alt="Logo" class="h-5 w-auto object-contain" />
      <!-- <h1 class="text-xl font-bold">Assess.AI</h1> -->
    </div>
    <div class="space-x-2">
       <button onclick="downloadModel()" class="border px-4 py-2 text-sm rounded hover:bg-gray-100">Competency Model</button>
      <!-- <button onclick="downloadPDF()" class="border px-4 py-2 text-sm rounded hover:bg-gray-100">Download as PDF</button>
      <button class="bg-[#071D49] text-white px-4 py-2 text-sm rounded hover:bg-blue-700 disabled">Share Report</button> -->
    </div>
  </header>

  <!-- Main Content -->
 <main class="max-w-[80%] mx-auto pt-24 pb-8" id="pdf-content">

   <!-- Heading -->
<div class="flex flex-col md:flex-row md:items-center justify-between mb-8">
  <h2 class=" mb-4 md:mb-0 text-sm">
    <span class="text-2xl font-bold text-[#0066F5]">Hey Haytham Elbanna,</span> <br> Here is your personalized report. Toggle between <span class="font-bold text-[#071D49]">"Competency View and Detailed View"</span>  to dive deeper.
  </h2>

  <!-- Toggle -->
<div class="relative flex bg-gray-200 rounded-full p-1  shadow w-[250px] h-[40px]">

  <!-- Sliding background -->
  <div id="view-slider" class="absolute top-1 left-1 bg-[#071D49] text-[#ffffff] rounded-full shadow transition-all duration-300 h-[33px] w-1/2"></div>

  <!-- Buttons -->
  <button id="CompetencyBtn" onclick="switchView('competency')" class="relative  flex flex-1 px-2 py-1 text-xs justify-center items-center rounded-full text-white font-bold z-10">
    Competency View
  </button>
  <button id="DetailedBtn" onclick="switchView('detailed')" class="relative flex flex-1 px-2 py-1 text-xs justify-center items-center rounded-full text-black font-bold z-10">
    Detailed View
  </button>
</div>

</div>
 <div id="competency-view">
    <div class="grid grid-cols-1 md:grid-cols-12 gap-6">
      <!-- Skills Assessment -->
      <div class="bg-white p-6 rounded-lg shadow-md md:col-span-8 col-span-12">
        <div class="flex justify-between items-center mb-2 flex-wrap gap-2">
          <h3 class="text-2xl text-[#071D49]  font-bold">OVERALL COMPETENCY VIEW</h3>
          <div class="relative flex bg-gray-200 rounded-full p-1 w-max">
            <div id="slider" class="absolute top-1 left-1 bg-[#071D49] rounded-full shadow transition-all duration-300 h-[32px]"></div>
            <button id="barBtn" onclick="switchChart('bar')" class="relative px-4 py-1 text-sm rounded-full text-white font-medium z-10">Bar Chart</button>
            <button id="radarBtn" onclick="switchChart('radar')" class="relative px-4 py-1 text-sm rounded-full text-black font-medium z-10">Radar Chart</button>
          </div>
        </div>

        <div id="legends" class="flex items-center justify-end space-x-4 mt-[30px] mb-2" >
          <span class="text-[#8A2ECC] text-sm">● Self</span>
          <span class="text-[#071D49] text-sm">● Manager</span>
          <!-- <span class="text-[#0066F5] text-sm"><span class="inline-block w-2.5 h-1.5 bg-[#0066F5] mr-1.5 rotate-90"></span> Role Benchmark</span> -->
        </div>

        <!-- Chart Containers -->
        <div id="accordion-content-skills" class="transition-all duration-300 ease-in-out">
          <div id="skills-container" class="space-y-6 text-sm relative"></div>
          <div id="radarContainer" class="hidden w-[500px] h-[400px] mx-auto">
            <canvas id="radarChart" class="w-full h-full"></canvas>
          </div>
        </div>
      </div>

      <!-- Performance Summary -->
      <div class="bg-white p-6 rounded-lg shadow-md md:col-span-4 col-span-12">
        <h3 class="text-xl text-[#071D49] font-bold mb-4 text-left">OVERALL SUMMARY</h3>
        <p class="text-sm  mb-2">
         You bring energy, clarity, and precision to your role as a Brand Manager. Your ability to use insights, competitive signals, and behavioral data to craft strategic plans that resonate both globally and locally sets a strong foundation. You think like a strategist but act with the speed and focus of a field-connected marketer, keeping your plans grounded in patient and HCP realities.
        </p>
        <p class="text-sm  mb-2">
        To grow further, you can formalize and scale your strategic thinking—building lifecycle planning, scenario modeling, and predictive tools into your process. While your segmentation work and adaptive messaging are strong, applying those learnings across indications and into long-term portfolio design will elevate your strategic influence. Proactively linking tactical success with lifecycle value will help you shape AbbVies brand futures, not just performance today.
        </p>
        <p class="text-sm mb-2">
         Youve already shown curiosity and initiative in building digital capabilities, piloting ACE Journeys, and applying enrollment tools to personalize field strategy. Strengthening your financial acumen, scaling personalization infrastructure, and collaborating with data science partners to operationalize AI-driven segmentation will further position you as a next-gen marketing leader at AbbVie.
        </p>
        
    
    
    </div>
    </div>

    <!-- Accordions -->
    <div class="flex flex-col md:flex-row items-start gap-6 mt-6">
      <div class="bg-white p-6 rounded-lg shadow-md w-full md:w-1/2">
        <button id="accordion-toggle-strengths" class="w-full flex justify-between items-center text-lg font-semibold text-left focus:outline-none" onclick="toggleAccordion('strengths')">
          <span class="text-xl text-[#071D49] font-bold">KEY STRENGTHS</span>
          <svg id="accordion-arrow-strengths" class="w-5 h-5 transition-transform" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        <div id="accordion-content-strengths" class="mt-4 space-y-4 transition-all duration-300 ease-in-out"></div>
      </div>

      <div class="bg-white p-6 rounded-lg shadow-md w-full md:w-1/2">
        <button id="accordion-toggle-development" class="w-full flex justify-between items-center text-lg font-semibold text-left focus:outline-none" onclick="toggleAccordion('development')">
          <span class="text-[#071D49] text-xl font-bold">DEVELOPMENT PRIORITIES</span>
          <svg id="accordion-arrow-development" class="w-5 h-5 transition-transform" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        <div id="accordion-content-development" class="mt-4 space-y-4 transition-all duration-300 ease-in-out"></div>
      </div>
    </div>

    <!-- learining -->
      <div class="mx-auto bg-white p-6 mt-5 rounded-lg shadow">
    <div class="flex justify-between items-center mb-1">
      <h1 class="text-2xl font-bold text-[#071D49]">Your Learning Recommendations (For Illustration Only)</h1>
      <button class="bg-[#071D49] text-white px-4 py-2 rounded hover:bg-blue-800 hidden">Select Team member</button>
    </div>
    <p class="mb-6  text-sm">
      Based on the priorities identified from the assessment here are the top learning assets picked for you for self guided learning
    </p>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <!-- Column 1 -->
      <div class="bg-white border rounded-lg shadow">
        <div class="bg-[#071D49] text-white text-xl font-semibold p-3 rounded-t-lg">Lifecycle Optimization</div>
        <p class="text-[#071D49] px-4 pt-2 font-medium">Priority 1</p>
        <ul class="divide-y">
          <li class="p-4 flex justify-between items-start">
            <div>
              <p class="font-medium">Strategic Leadership</p>
              <p class="text-sm text-gray-600">Course  4 weeks</p>
            </div>
            <a href="#" class="text-[#071D49] underline text-sm">Click Here</a>
          </li>
          <li class="p-4 flex justify-between items-start">
            <div>
              <p class="font-medium">Leading Through Change</p>
              <p class="text-sm text-gray-600">Video  45 min</p>
            </div>
            <a href="#" class="text-[#071D49] underline text-sm">Click Here</a>
          </li>
          <li class="p-4 flex justify-between items-start">
            <div>
              <p class="font-medium">Decision Making Workshop</p>
              <p class="text-sm text-gray-600">Workshop  1 day</p>
            </div>
            <a href="#" class="text-[#071D49] underline text-sm">Click Here</a>
          </li>
          <li class="p-4 flex justify-between items-start">
            <div>
              <p class="font-medium">7 Habits of Effective Leaders</p>
              <p class="text-sm text-gray-600">Book  320 pages</p>
            </div>
            <a href="#" class="text-[#071D49] underline text-sm">Click Here</a>
          </li>
        </ul>
      </div>

      <!-- Column 2 -->
      <div class="bg-white border rounded-lg shadow">
        <div class="bg-[#071D49] text-white text-xl font-semibold p-3 rounded-t-lg">Data & Analytical Literacy</div>
        <p class="text-[#071D49] px-4 pt-2 font-medium">Priority 2</p>
        <ul class="divide-y">
          <li class="p-4 flex justify-between items-start">
            <div>
              <p class="font-medium">Data Analysis with Python</p>
              <p class="text-sm text-gray-600">Course  6 weeks</p>
            </div>
            <a href="#" class="text-[#071D49] underline text-sm">Click Here</a>
          </li>
          <li class="p-4 flex justify-between items-start">
            <div>
              <p class="font-medium">Visualizing Data for Impact</p>
              <p class="text-sm text-gray-600">Video  30 min</p>
            </div>
            <a href="#" class="text-[#071D49] underline text-sm">Click Here</a>
          </li>
          <li class="p-4 flex justify-between items-start">
            <div>
              <p class="font-medium">Advanced Excel Workshop</p>
              <p class="text-sm text-gray-600">Workshop  4 hours</p>
            </div>
            <a href="#" class="text-[#071D49] underline text-sm">Click Here</a>
          </li>
          <li class="p-4 flex justify-between items-start">
            <div>
              <p class="font-medium">Storytelling with Data</p>
              <p class="text-sm text-gray-600">Book  288 pages</p>
            </div>
            <a href="#" class="text-[#071D49] underline text-sm">Click Here</a>
          </li>
        </ul>
      </div>

      <!-- Column 3 -->
      <div class="bg-white border rounded-lg shadow">
        <div class="bg-[#071D49] text-white text-xl font-semibold p-3 rounded-t-lg">Personalized Content and Channel</div>
        <p class="text-[#071D49] px-4 pt-2 font-medium">Priority 3</p>
        <ul class="divide-y">
          <li class="p-4 flex justify-between items-start">
            <div>
              <p class="font-medium">Business Communication</p>
              <p class="text-sm text-gray-600">Course  3 weeks</p>
            </div>
            <a href="#" class="text-[#071D49] underline text-sm">Click Here</a>
          </li>
          <li class="p-4 flex justify-between items-start">
            <div>
              <p class="font-medium">The Art of Public Speaking</p>
              <p class="text-sm text-gray-600">Video  1 hour</p>
            </div>
            <a href="#" class="text-[#071D49] underline text-sm">Click Here</a>
          </li>
          <li class="p-4 flex justify-between items-start">
            <div>
              <p class="font-medium">Email Communication</p>
              <p class="text-sm text-gray-600">Workshop  2 hours</p>
            </div>
            <a href="#" class="text-[#071D49] underline text-sm">Click Here</a>
          </li>
          <li class="p-4 flex justify-between items-start">
            <div>
              <p class="font-medium">Crucial Conversations</p>
              <p class="text-sm text-gray-600">Book  256 pages</p>
            </div>
            <a href="#" class="text-[#071D49] underline text-sm">Click Here</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
    </div>
    <div id="detailed-view" class="hidden"> 
     <div class="max-w-full mx-auto">
    <h2 class="text-2xl text-[#071D49] font-bold mb-6">Detailed Competency Overview</h2>

    <div x-data="{ openIndex: null }">
      <!-- Accordion Items Start -->
      <template x-for="(item, index) in [
           {logo: './images/business.png',
          title: 'Business & Financial Acumen',
          score: '1.67/3',
          narrative: 'You apply a good understanding of profitability and planning processes in real-world scenarios. With deeper strategic exposure and a stronger investment mindset, you can enhance your influence on brand and business direction.',
          subcompetencies: [
            { title: 'External Influences', score: '2/3', self: '2', manager: '0', selfWidth: '66%', managerWidth: '0%',feedback: 'You respond quickly to competitive dynamics and market access shifts by adjusting regional brand plans. Your Quebec-focused reallocation showed strong awareness and business responsiveness. This has helped you stay ahead of local disruption. <br/>You can take this further by building structured external monitoring into your planning rhythm. Regular scenario-based forecasting would make your response even more proactive. This enables you to spot risks and opportunities earlier.' },
            { title: 'Financial Acumen', score: '3/3', self: '2', manager: '0', selfWidth: '66%', managerWidth: '0%',feedback: 'You’ve demonstrated strong fiscal discipline by shifting investments based on KPIs and prescriber behavior. Your budget agility supports efficiency and sharpens focus on higher-return tactics. This strengthens your financial credibility. <br/>To grow further, work closely with finance partners earlier in the cycle to influence long-range planning. Increasing visibility into AbbVie’s forecasting systems will boost your strategic foresight. This will position you as a more holistic business advisor.' },
            { title: 'Planning approach', score: '1/3', self: '2', manager: '0', selfWidth: '66%', managerWidth: '0%',feedback: 'You demonstrated strong financial responsiveness by reallocating resources in Quebec based on market access shifts. Your ability to lead scenario-based planning and adjust strategy through data-driven inputs speaks to your advanced investment judgment and strategic flexibility.<br/>To grow further, try embedding yourself earlier into long-range planning and scenario simulations across markets. Deepening your visibility into financial forecasting will enhance your ability to shape cross-market plans with sharper investment trade-offs.' },
            
          ]
        },
        {logo: './images/Analysis.png',
          title: 'Analysis to Insights',
          score: '1.67/3',
          narrative: 'You have developed strong analytical acumen and use insights to inform marketing decisions. Strengthening your predictive analytics and visualization skills will further boost cross-functional impact.',
          subcompetencies: [
          { title: 'Patient and Customer Centricity', score: '1.5/3', self: '3', manager: '0', selfWidth: '100%', managerWidth: '0%',feedback: 'You apply segmentation effectively, tailoring strategies to moderate patients and high-value HCP groups. Your PSP alignment shows strong attention to unmet needs and behavior change. These actions strengthen both initiation and adherence.<br/>To deepen this strength, establish a regular cadence to revalidate segments with behavioral insights. Pairing field feedback with PSP data will enhance personalization. This ensures continued message relevance and impact.' },  
            { title: 'Data & Analytical Literacy', score: '2/3', self: '2', manager: '0', selfWidth: '66%', managerWidth: '0%',feedback: 'You balance urgency and depth by using audits, enrollment trends, and consult input to guide brand decisions. This helps you act decisively even in complex data environments. You’re seen as a practical, insight-led strategist. <br/>Elevate your skills by exploring predictive analytics or AI-based segmentation models with data partners. Automating insight loops will help you plan more proactively. This also frees time for high-value strategic thinking.' },
            { title: 'Data-Informed Decision Making', score: '3/3', self: '3', manager: '0', selfWidth: '100%', managerWidth: '0%',feedback: 'You make confident, data-backed pivots mid-campaign—like in Quebec—based on enrollment data and SOV metrics. Your use of directional KPIs enhances adaptability. This reflects strong real-time marketing acumen.<br/>Embed dynamic dashboards to shorten time between insight and action and drive faster decision-making. Collaborate with analytics to automate feedback systems. This allows for continuous campaign optimization at scale.' },
            
          ]
        },
        {logo: './images/Brandport.png',
          title: 'Brand & Portfolio Value',
          score: '2.17/3',
          narrative: 'You develop compelling, cohesive brand narratives and guide portfolio-level strategy. Your strategic clarity and cross-brand vision ensure sustainable success in a competitive market.',
          subcompetencies: [
          { title: 'Strategic Choices', score: '2/3', self: '2', manager: '0', selfWidth: '66%', managerWidth: '0%',feedback: 'You anchor teams around a few key business challenges to ensure planning stays focused and relevant. Your ability to define what matters aligns resources and unlocks clarity. This drives better execution outcomes. <br/>Expand this skill by integrating scenario modeling and lifecycle trade-offs into your 1-7-5 strategy. This adds a longer-term strategic layer to your thinking. It supports more robust decision-making under uncertainty.' },
          { title: 'Lifecycle Optimization', score: '3/3', self: '1', manager: '0', selfWidth: '33%', managerWidth: '0%',feedback: 'Expand this skill by integrating scenario modeling and lifecycle trade-offs into your 1-7-5 strategy. This adds a longer-term strategic layer to your thinking. It supports more robust decision-making under uncertainty.<br/>To elevate this further, connect your insights to cross-indication or long-term brand evolution plans. Documenting learnings will improve scale and replicability. This positions you as a franchise-level strategist.' },
           { title: 'Compelling Brand Story', score: '2/3', self: '2', manager: '0', selfWidth: '66%', managerWidth: '0%',feedback: 'You proactively shaped the brand narrative around safety, access, and differentiation, particularly in response to new entrants. Your focus on segmentation and tailored messaging across HCP profiles shows a sophisticated understanding of what builds long-term brand value.<br/>Consider evolving your messaging further by using real-world evidence and behavior data to update the brand story consistently. This will help maintain emotional and scientific relevance while defending against competitor repositioning.' },  
           
          ]
        },
        {logo: './images/stakeholder.png',
          title: 'Stakeholder Alignment',
          score: '2.3/3',
          narrative: 'You are a connector and integrator across functions, enabling unified execution. Your ability to lead alignment efforts across Brand Teams and external partners drives strategic cohesion.',
          subcompetencies: [
           { title: 'Matrix Working', score: '3/3', self: '2', manager: '0', selfWidth: '66%', managerWidth: '0%',feedback: 'You’ve driven strong cross-functional alignment through external validation and a shared response to market threats. Your inclusive planning approach ensures all partners—from Medical to Access—are invested and moving together with a unified brand goal.<br/>To deepen your matrix leadership, try initiating earlier strategy sprints before tactical execution. Pre-aligning on shared business challenges with functional leads can speed up downstream planning and enhance collective ownership of results.' },
           { title: 'Cross-Functional Collaboration', score: '3/3', self: '3', manager: '0', selfWidth: '100%', managerWidth: '0%',feedback: 'You unify cross-functional teams through early alignment and clear communication frameworks. You’ve built trust with sales, access, medical, and PSP by sharing strategy ownership. This cohesion accelerates execution.<br/>Codify your approach to matrix working and share it across teams to raise collaboration standards. This helps your peers and elevates your leadership visibility. It fosters a culture of alignment across the brand.' },
{ title: 'Agency Collaboration', score: '3/3', self: '2', manager: '0', selfWidth: '66%', managerWidth: '0%',feedback: 'You’ve supported agencies with a clearly defined narrative and data-backed storytelling assets to address competitive objections. Your partnership mindset and clarity around brand needs have enabled more tailored, high-impact creative development.<br/>To take this further, consider running post-campaign retrospectives with your agency and cross-functional teams. Reviewing effectiveness, identifying blockers, and aligning on what “good” looks like will increase efficiency and deepen collaboration.' }
            
          ]
        },
        {logo: './images/story.png',
          title: 'Effective Storytelling',
          score: '1.67/3',
          narrative: 'You inspire through powerful storytelling that drives alignment and action. Your ability to craft high-impact narratives strengthens AbbVies presence across internal and external stakeholders.',
          subcompetencies: [
          { title: 'Compelling Connections', score: '2.5/3', self: '1', manager: '0', selfWidth: '33%', managerWidth: '0%',feedback: 'You tell stories that connect emotionally, using video and patient context to bring insights to life. This keeps your content relevant and resonant with internal and external audiences. It builds lasting recall and motivation.<br/>Formalize storytelling impact by tracking engagement shifts, message recall, or team behavior change. These feedback loops will sharpen your delivery and message prioritization. They link inspiration to measurable value.' },
          { title: 'Powerful Narratives', score: '2.5/3', self: '2', manager: '0', selfWidth: '66%', managerWidth: '0%',feedback: 'You’ve shown strength in adaptive storytelling, using patient videos and scientific anchors to influence internal and external stakeholders. By aligning cross-functional input into your message, you’ve built narratives that are both evidence-based and emotionally compelling.<br/>To refine your impact, begin measuring narrative effectiveness across audiences. Gathering structured feedback and tracking engagement shifts will help fine-tune how you tell stories that land powerfully across diverse stakeholders' },
          { title: 'Driving Impact', score: '3/3', self: '2', manager: '0', selfWidth: '66%', managerWidth: '0%',feedback: 'You use consults and surveys to refine messages and ensure clarity before launch. Your feedback culture keeps messaging tuned to audience needs. This improves both team confidence and HCP credibility.<br/>Strengthen this by defining behavioral KPIs that show message impact over time—like prescribing confidence or HCP follow-up. This helps demonstrate storytelling ROI. It also encourages better narrative iteration.' },
          ]
        },
        {logo: './images/market.png',
          title: 'Market Access',
          score: '2/3',
          narrative: 'You integrate access requirements into your marketing thinking and strategy design. Enhancing value communication with tailored messaging will further support patient access outcomes.',
          subcompetencies: [
           { title: 'Market Access Stakeholders Impact', score: '2/3', self: '2', manager: '0', selfWidth: '66%', managerWidth: '0%',feedback: 'You proactively integrate access strategy into your brand planning with province-specific tactics. You understand how to adapt to payer complexity and HCP expectations. This enhances credibility and enables smoother launches.<br/>Take this further by embedding access forecasting earlier into annual planning. Aligning sooner with MA teams improves foresight and efficiency. It positions your strategy to anticipate—not just react to—market constraints.' },
            { title: 'Pricing and Distribution', score: '2/3', self: '2', manager: '0', selfWidth: '66%', managerWidth: '0%',feedback: 'You support field effectiveness through onboarding tools and messaging around PSP efficiencies. This simplifies startup and improves HCP confidence. It reduces friction and strengthens trust in your brand.<br/>Strengthen this capability by tracking funding flow shifts and regional payer updates more systematically. Early alerts allow proactive PSP adaptation. It reduces reactive work and increases confidence in brand delivery.' }
          
          ]
        },
          {logo: './images/Personal.png',
          title: 'Personalized Marketing',
          score: '1.83/3',
          narrative: 'You design data-driven journeys and deliver impactful experiences using analytics. Continue evolving your test-and-learn mindset and scaling personalization for greater value.',
          subcompetencies: [
            { title: 'Audience Targeting', score: '2/3', self: '3', manager: '0', selfWidth: '100%', managerWidth: '0%',feedback: 'You apply tiered segmentation (Top 10, Focus 5, Declining 15) to drive tailored outreach and focused investment. Your efforts opened new growth opportunities and strengthened field strategy. This shows deep HCP understanding.<br/>Improve this further by layering in behavioral triggers to dynamically adjust targeting at scale. Using real-time HCP actions will enhance precision. It moves your segmentation from static to truly adaptive.' },
            { title: 'Personalized Content and Channel', score: '1.5/3', self: '2', manager: '0', selfWidth: '66%', managerWidth: '0%',feedback: 'You’ve implemented ACE Journeys and use interaction scores to personalize content. Your modular content approach helps keep messages consistent and focused. This ensures alignment with brand narrative and customer behavior.<br/>Elevate this by building faster content workflows with feedback loops for modular performance. Iterating content based on usage improves engagement. It allows you to scale personalization with agility' },
            { title: 'Customer Centric Experiences ', score: '2/3', self: '3', manager: '0', selfWidth: '100%', managerWidth: '0%',feedback: 'You’ve shown strong customer focus by measuring content effectiveness through SOV and tool utilization. You also involve the field and HCP advisors in refining materials. This drives continuous improvement and alignment<br/>Build journey-level analytics to compare engagement across HCP segments and content types. This enables smarter orchestration and targeted optimization. It ensures content truly meets the needs of each customer path.' }
          ]
        }
      ]" :key="index">
        <div class="bg-white rounded-lg shadow-sm mb-4 border">
          <button
  class="w-full flex justify-between items-center p-4"
  @click="openIndex === index ? openIndex = null : openIndex = index"
>
  <div class="flex items-center space-x-4">
    <!-- Dynamic logo binding with Alpine.js -->
    <img :src="item.logo" :alt="item.title + ' logo'" class="w-[60px] h-[60px] object-contain me-[10px]" />
    <div>
      <h3 class="text-lg font-semibold text-gray-800" x-text="item.title"></h3>
      <p class="text-sm text-gray-500 text-left">
        <!-- Overall Score: <span x-text="item.score"></span> -->
      </p>
    </div>
  </div>
  <div class="text-gray-400 text-xl" x-text="openIndex === index ? '▲' : '▼'"></div>
</button>


          <div x-show="openIndex === index" x-transition class="p-6 border-t bg-gray-50">
            

            <!-- <h4 class="font-semibold text-gray-700 mb-4">Subcompetencies</h4> -->
            <div class="grid md:grid-cols-3 gap-4">
              <template x-for="(sub, i) in item.subcompetencies" :key="i">
                <div class="bg-white rounded-lg border p-4 shadow-sm">
                  <h5 class="font-semibold text-gray-800" x-text="sub.title"></h5>
                  <!-- <p class="text-sm text-gray-600 font-medium" x-text="sub.score"></p> -->
                  <div class="text-sm text-gray-600 mt-2">Self <span class="float-right"x-text="(+sub.self < 1) ? '' : (+sub.self < 2) ? 'Foundational' : (+sub.self < 3) ? 'Advanced' : 'Mastery'"></span></div>
                  <div class="w-full h-2 bg-gray-200 rounded">
                    <div class="bg-[#8A2ECC] h-2 rounded" :style="'width: ' + sub.selfWidth"></div>
                  </div>
                  <div class="text-sm text-gray-600 mt-2">Manager <span class="float-right"x-text="(+sub.manager < 1) ? '' : (+sub.manager < 2) ? 'Foundational' : (+sub.manager < 3) ? 'Advanced' : 'Mastery'"></span></div>
                  <div class="w-full h-2 bg-gray-200 rounded">
                    <div class="bg-[#071D49] h-2 rounded" :style="'width: ' + sub.managerWidth"></div>
                  </div>
                </div>
              </template>
            </div>
            <!-- <h4 class="font-semibold text-gray-700 mt-4 mb-2">Competency Feedback</h4>
            <p class="text-gray-300 mb-6" x-text="item.narrative"></p> -->
            <template x-for="sub in item.subcompetencies" :key="sub.title">
  <div class="my-4">
    <h5 class="font-medium text-gray-700" x-text="sub.title"></h5>
   <ul class="text-gray-600 text-sm mt-1" x-show="sub.feedback" x-html="sub.feedback.split('<br/>').map(p => `<li class='list-disc ml-5'>${p}</li>`).join('')"></ul>
  </div>
</template>
          </div>
        </div>
      </template>
    </div>
  </div>
</div>
  </main>

  <script>
    const slider = document.getElementById('slider');
    const barBtn = document.getElementById('barBtn');
    const radarBtn = document.getElementById('radarBtn');
    
    let activeChart = '';
    let radarChart;

    window.onload = () => {
      activeChart = 'bar';
      updateSlider(barBtn);
      renderSkills();
    };

    function switchChart(type) {
      if (type === activeChart) return;
      activeChart = type;

      if (type === 'bar') {
        updateSlider(barBtn);
        document.getElementById('skills-container').innerHTML = '';  // Clear previous bar graph
        document.getElementById('skills-container').style.display = 'block';
        document.getElementById('radarContainer').style.display = 'none';
        barBtn?.classList.add("text-white");
 radarBtn?.classList.remove("text-white")
        renderSkills();
      } else {
        updateSlider(radarBtn);
        document.getElementById('skills-container').style.display = 'none';
        document.getElementById('radarContainer').style.display = 'block';
        barBtn?.classList.remove("text-white");
    barBtn?.classList.add("text-black");
    radarBtn?.classList.add("text-white")
        renderRadarChart();
      }
    }

    function updateSlider(targetBtn) {
      slider.style.width = targetBtn.offsetWidth + 'px';
      slider.style.left = targetBtn.offsetLeft + 'px';
      slider.style.top = targetBtn.offsetTop + 'px';
      slider.style.height = targetBtn.offsetHeight + 'px';
    }

    function downloadPDF() {
      const element = document.getElementById("pdf-content");
      const opt = { margin: 0.5, filename: 'Overall_Competency_Report.pdf', image: { type: 'jpeg', quality: 0.98 }, html2canvas: { scale: 2 }, jsPDF: { unit: 'in', format: [14, 12], orientation: 'portrait' } };
      html2pdf().from(element).set(opt).save();
    }

    const skillsData = [
      { label: "BUSINESS & FINANCIAL ACUMEN", description: "Understanding the key forces and dynamics inside and outside AbbVie that guide all decisions.", self: 1.9, manager: 0, benchmark: 2 },
      { label: "ANALYSIS TO INSIGHTS",description: "Gathering, analyzing and synthesizing data to generate impactful insights that drive action, deepen customer intimacy and fuel curiosity",  self: 2.67, manager: 0, benchmark: 2},
      { label: "BRAND & PORTFOLIO VALUE",description: "Realizing the full potential of our brands and portfolios using a deep understanding of the market, competition, customers, and clinical value to build a compelling brand story and provide short- and long-term strategic direction",  self: 1.4, manager: 0, benchmark: 2.5 },
      { label: "STAKEHOLDER ALIGNMENT",description: "Building strong relationships with internal stakeholders to exceed shared goals",  self: 1.9, manager: 0, benchmark: 2 },
      { label: "EFFECTIVE STORYTELLING",description: "Inspiring action through compelling narratives that effectively convey value for key stakeholders,including customers, peers and leaders ",  self: 1.4, manager: 0, benchmark: 2.5 },
      { label: "MARKET ACCESS",description: "Understanding market access key stakeholders economics and decision making to enable patient access",  self: 1.3, manager: 0, benchmark: 2 },
      { label: "PERSONALIZED MARKETING",description: "Delivering highly tailored, compelling experiences using real-time data, advanced analytics and AI to reflect customers unique preferences and behaviors",  self: 2.67, manager: 0, benchmark: 2.5 },
    ];

    const strengths = [
      { title: "Cross-Functional Collaboration",competency:'Stakeholder Alignment', description: "	You bring field, access, PSP, and medical together into a shared strategy, aligning early and executing with purpose. Your ability to communicate clear goals and trust your partners builds collective ownership. This leadership creates a “ONE team” culture that accelerates progress.<br/> You unify stakeholders through data and validation, reducing resistance and rallying teams around common business challenges. By enhancing your use of data-driven insights, you can drive faster decision-making, improve engagement with key stakeholders, and refine marketing approaches to be more impactful, ensuring that the strategy resonates across the organization and with customers." },
      { title: "Patient and Customer Centricity ",competency:'Analysis to Insights', description: "You use PSP feedback, behavioral segmentation, and field insight to craft patient-centered strategies. Your targeting of the moderate patient segment reflects your ability to match unmet needs with high-value opportunities. This approach increases relevance and drives measurable enrollment lift.<br/>To amplify this further, you can leverage your patient-centered approach by integrating deeper customer insights from additional data sources, such as patient journey mapping and predictive analytics. By identifying emerging trends and refining patient profiles, you can proactively adjust your targeting strategies and elevate the effectiveness of your marketing." },
      { title: "Data-Informed Decision Making",competency:'Analysis to Insights', description: "You turn KPI insights into real-time campaign adjustments and resource shifts, such as in your Quebec strategy. Your use of enrollment tracking, market share signals, and consult feedback creates a responsive feedback loop. This decision-making agility maximizes ROI and brand momentum.<br/>You balance intuition with structured data to inform brand pivots without waiting for perfect conditions. You design tools that guide fast interpretation while maintaining strategic clarity. This mindset makes your brand more agile and performance-driven across markets." },
     
    ];

    const development = [
      { title: "Lifecycle Optimization",competency:'Brand and Portfolio Value', description: "Youve excelled at territory-specific execution, but theres room to scale those insights across lifecycle phases. Connecting local pilots to broader long-term brand planning will increase your enterprise-level impact. Documenting learnings can help futureproof cross-indication strategy.<br />Embedding lifecycle strategy into your annual brand planning and forecasting will deepen your influence. Consider mapping where your brand contributes across the disease continuum and where other indications intersect. This expansion strengthens your voice at the franchise level." },
      { title: "Compelling Connections",competency:'Effective Storytelling', description: "You structure your messages clearly and use evidence effectively. To elevate impact, start weaving in emotionally compelling elements such as customer stories, real-world analogies, or vivid scenarios. This shift will help you move from simply informing to truly inspiring and influencing others.<br/>To increase your influence, deepen your understanding of stakeholder motivations and preferences, and fine-tune your message to speak directly to what matters most to them." },
       { title: "Personalized Content and Channel",competency:'Personalized Marketing', description: "Youre using ACE Journeys effectively and piloting segmentation-based messaging. Scaling these approaches through more agile content production and feedback loops will increase your speed-to-market. Streamlining across compliance, MedReg, and segments will make your efforts more scalable.<br/>Building a structured content development framework—with performance tracking by segment—will let you deploy messages faster and iterate continuously. You already know how to personalize well; the next step is making that personalization repeatable, compliant, and automated." }
    ];

const getPosition = (value) => {
  if (value <= 0) return "0%"; // Handle 0 and negatives
  const clamped = Math.min(3, value);
  const percent = (clamped / 3) * 100;
  return percent + "%";
};


   function renderSkills() {
  const container = document.getElementById("skills-container");
  container.innerHTML = ""; // Clear previous content if any

  // Add the scale header row
  const scaleRow = document.createElement("div");
  scaleRow.className = "grid grid-cols-6 gap-4 mb-4 text-xs text-gray-500 px-1 mt-[50px]";
  scaleRow.innerHTML = `
    <div class="col-span-2"></div>
    <div class="col-span-4 relative h-5">
      <div class="absolute top-0 left-0 w-full flex justify-between text-center font-semibold text-sm text-gray-600">
        <div class="w-1/4">Foundational</div>
        <div class="w-1/2">Advanced</div>
        <div class="w-1/3">Mastery</div>
      </div>
    </div>
  `;
  container.appendChild(scaleRow);

  // Vertical benchmark guide lines (if needed)
  const verticalLines = document.createElement("div");
  verticalLines.className = "absolute top-0 left-0 w-full h-full pointer-events-none z-20";
  verticalLines.innerHTML = `
    <div class="absolute top-[-20px] bottom-[10px] w-px border-l border-dotted border-gray-400" style="left: 55%; "></div> 
    <div class="absolute top-[-20px] bottom-[10px] w-px border-l border-dotted border-gray-400" style="left: 76%;"></div>
  `;
  container.appendChild(verticalLines);

  // Loop through skills data
  skillsData.forEach(skill => {
    const row = document.createElement("div");
    row.className = "grid grid-cols-6 gap-4 items-center mb-4";

    // Skill label with hover description
   // Label wrapper with bottom border
const labelWrapper = document.createElement("div");
labelWrapper.className = "col-span-2 border-b border-gray-200 pb-2";

// Create a group container for hover behavior
const groupContainer = document.createElement("div");


// Flex row for label and icon
const labelRow = document.createElement("div");
labelRow.className = "flex items-center justify-between";

// Label text
const label = document.createElement("div");
label.className = "font-medium text-[#948979]";
label.textContent = skill.label;

// Feather 'info' icon (larger, hover-enabled)
const infoIcon = document.createElement("div");
infoIcon.className = "relative group cursor-pointer";
infoIcon.innerHTML = `
 <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle-fill text-gray-300" viewBox="0 0 16 16">
  <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2"/>
</svg>
`;

// Description tooltip (full-width, appears below on hover)
const description = document.createElement("div");
description.className = `
  absolute hidden group-hover:block
  left-0 top-[150%] z-50
  min-w-[200px] max-w-xs
  bg-white text-gray-700 text-xs rounded shadow-lg px-3 py-2
  whitespace-pre-wrap
`;

description.textContent = skill.description || "";

// Assemble structure
labelRow.appendChild(label);
labelRow.appendChild(infoIcon);
groupContainer.appendChild(labelRow);
infoIcon.appendChild(description); // now a child of the icon container
labelWrapper.appendChild(groupContainer);

    // Skill graph with bars and benchmark line
    const graph = document.createElement("div");
    graph.className = "col-span-4 relative h-6 bg-gray-100 rounded";

    graph.innerHTML = `
      <!-- Self Bar -->
      <div class="absolute top-[10%] left-0 h-[35%] bg-[#8A2ECC] rounded" style="width: ${getPosition(skill.self)};"></div>

      <!-- Manager Bar -->
      <div class="absolute top-[55%] left-0 h-[35%] bg-[#071D49] rounded" style="width: ${getPosition(skill.manager)};"></div>

      <!-- Benchmark line -->
     <!-- <div class="absolute top-0 bottom-0 w-[4px] bg-[#0066F5]" style="left: ${getPosition(skill.benchmark)};"></div> -->
    `;

    row.appendChild(labelWrapper);
    row.appendChild(graph);
    container.appendChild(row);
  });
}


    function renderRadarChart() {
      const ctx = document.getElementById('radarChart').getContext('2d');
      const labels = skillsData.map(skill => skill.label);
      const selfData = skillsData.map(skill => skill.self);
      const managerData = skillsData.map(skill => skill.manager);
      const benchmarkData = skillsData.map(skill => skill.benchmark);
      if (radarChart) radarChart.destroy();
      radarChart = new Chart(ctx, {
        type: 'radar',
        data: { labels, datasets: [
          { label: 'Self', data: selfData, borderColor: '#8A2ECC', backgroundColor: 'rgba(138, 46, 204, 0.2)', pointBackgroundColor: '#8A2ECC' },
          { label: 'Manager', data: managerData, borderColor: '#071D49', backgroundColor: 'rgba(7, 29, 73, 0.2)', pointBackgroundColor: '#071D49' },
          // { label: 'Role Benchmark', data: benchmarkData, borderColor: '#0066F5', backgroundColor: 'rgba(0, 102, 245, 0.2)',pointStyle:"rect", pointBackgroundColor: '#0066F5' }
        ]},
       options: {
  responsive: true,
  maintainAspectRatio: false,
  scales: {
    r: {
      min: 0,
      max: 3,
      ticks: { stepSize: 1 }
    }
  },
 plugins: {
  legend: {
    position: 'bottom',
    align: 'center' // or 'center', or 'end'
  }
}
}
      });
    }

   function renderCards(data, containerId) {
  const container = document.getElementById(containerId);
  data.forEach(item => {
    const div = document.createElement("div");
    div.className = " border-l-4 border-[#071D49] px-4 py-2 rounded relative";

    // Convert <br/> string into list items
    const bulletPoints = item.description
      .split('<br/>')
      .map(p => `<li>${p}</li>`)
      .join('');

    div.innerHTML = `
      <div class="flex justify-between items-center mb-1">
          <div class="flex flex-col">
     <span class="text-[10px]  font-bold text-gray-500">${item.competency.toUpperCase()}</span>
    <span class="font-medium text-[#071D49]">${item.title}</span>
  </div>
      </div>
      <ul class="text-gray-600 text-sm mt-1 list-disc ml-5">
        ${bulletPoints}
      </ul>
    `;

    container.appendChild(div);
  });
}

    const toggleAccordion = (type) => {
      const content = document.getElementById(`accordion-content-${type}`);
      const arrow = document.getElementById(`accordion-arrow-${type}`);
      content.classList.toggle("hidden");
      arrow.classList.toggle("rotate-180");
    };
function switchView(view) {
  const competencyView = document.getElementById("competency-view");
  const detailedView = document.getElementById("detailed-view");
  const CompetencyBtn = document.getElementById("CompetencyBtn");
  const DetailedBtn = document.getElementById("DetailedBtn");
  const viewSlider = document.getElementById("view-slider");
const legendBox = document.getElementById("legends");

console.log("the legend is this ",legendBox);
  if (view === 'competency') {
    competencyView?.classList.remove("hidden");
    detailedView?.classList.add("hidden");
     CompetencyBtn?.classList.add("text-white");
 DetailedBtn?.classList.remove("text-white")
      legendBox.classList.remove("hidden");
    viewSlider.style.left = '0.25rem';  // same as left-1
  } else if (view === 'detailed') {
     legendBox.classList.add("hidden"); 
    competencyView?.classList.add("hidden");
    CompetencyBtn?.classList.remove("text-white");
    CompetencyBtn?.classList.add("text-black");
    DetailedBtn?.classList.add("text-white")
    detailedView?.classList.remove("hidden");
    viewSlider.style.left = '49%';
   
legendBox.classList.add("hidden");
  }
}
function downloadModel() {
  window.open('competency.pdf', '_blank');
}

    renderCards(strengths, "accordion-content-strengths");
    renderCards(development, "accordion-content-development");
  </script>
</body>
</html>
